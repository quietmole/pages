<!DOCTYPE HTML>
<html>
<head>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Bookmarklet of quietmole</title>
</head>
<body>
<h1>Bookmarklet of quietmole</h1>

Bookmarklet for IE (&gt;= 8), Safari and Chrome.


<h3>Create link plain</h3>

Create plain link from selected text or current page title.<br />
<em>E.g. Bookmarklet of quietmole https://quietmole.github.io/pages/</em><br />

<a href="javascript:void%20function(){function%20e(){var%20e=%22%22;if(window.getSelection)e=window.getSelection().toString();else%20if(document.getSelection)e=document.getSelection().toString();else{if(!document.selection)return%20null;e=document.selection.createRange().text}return%20e}var%20t=e(),n=window.document.title,o=window.location.href,i=[];t%3Fi.push(t):n%26%26i.push(n),i.push(o),window.prompt(%22created%20link%22,i.join(%22%20%22))}();">create link plain</a> / <a href="javascript:void%20function(){window.prompt(%22built%20javascript%22,%22javascript:void%2520function(){function%2520e(){var%2520e=%2522%2522;if(window.getSelection)e=window.getSelection().toString();else%2520if(document.getSelection)e=document.getSelection().toString();else{if(!document.selection)return%2520null;e=document.selection.createRange().text}return%2520e}var%2520t=e(),n=window.document.title,o=window.location.href,i=[];t%253Fi.push(t):n%2526%2526i.push(n),i.push(o),window.prompt(%2522created%2520link%2522,i.join(%2522%2520%2522))}();%22)}();">copy javascript</a>


<h3>Create link markdown</h3>

Create markdown link from selected text or current page title.<br />
<em>E.g. [Bookmarklet of quietmole](https://quietmole.github.io/pages/)</em><br />

<a href="javascript:void%20function(){function%20e(){var%20e=%22%22;if(window.getSelection)e=window.getSelection().toString();else%20if(document.getSelection)e=document.getSelection().toString();else{if(!document.selection)return%20null;e=document.selection.createRange().text}return%20e}var%20t=e(),n=window.document.title,o=window.location.href,i=[];t%3Fi.push(%22[%22+t+%22]%22):i.push(%22[%22+n+%22]%22),i.push(%22(%22+o+%22)%22),window.prompt(%22created%20link%22,i.join(%22%22))}();">create link markdown</a> / <a href="javascript:void%20function(){window.prompt(%22built%20javascript%22,%22javascript:void%2520function(){function%2520e(){var%2520e=%2522%2522;if(window.getSelection)e=window.getSelection().toString();else%2520if(document.getSelection)e=document.getSelection().toString();else{if(!document.selection)return%2520null;e=document.selection.createRange().text}return%2520e}var%2520t=e(),n=window.document.title,o=window.location.href,i=[];t%253Fi.push(%2522[%2522+t+%2522]%2522):i.push(%2522[%2522+n+%2522]%2522),i.push(%2522(%2522+o+%2522)%2522),window.prompt(%2522created%2520link%2522,i.join(%2522%2522))}();%22)}();">copy javascript</a>


<h3>Create link html</h3>

Create html link from selected text or current page title.<br />
<em>E.g. &lt;a href="https://quietmole.github.io/pages/"&gt;Bookmarklet of quietmole&lt;/a&gt;</em><br />

<a href="javascript:void%20function(){function%20e(e){return%20null==e%3F%22%22:e+%22%22}function%20t(e){return%20r[e]}function%20n(n){return%20n=e(n),n%26%26c.test(n)%3Fn.replace(i,t):n}function%20o(){var%20e=%22%22;if(window.getSelection)e=window.getSelection().toString();else%20if(document.getSelection)e=document.getSelection().toString();else{if(!document.selection)return%20null;e=document.selection.createRange().text}return%20e}var%20i=/[%26%3C%3E%22'`]/g,c=RegExp(i.source),r={%22%26%22:%22%26amp;%22,%22%3C%22:%22%26lt;%22,%22%3E%22:%22%26gt;%22,'%22':%22%26quot;%22,%22'%22:%22%26%2339;%22,%22`%22:%22%26%2396;%22},u=o(),l=window.document.title,d=window.location.href,a=%22%22;a+='%3Ca%20href=%22'+n(d)+'%22%3E',a+=n(u%3Fu:l),a+=%22%3C/a%3E%22,window.prompt(%22created%20link%22,a)}();">create link html</a> / <a href="javascript:void%20function(){window.prompt(%22built%20javascript%22,%22javascript:void%2520function(){function%2520e(e){return%2520null==e%253F%2522%2522:e+%2522%2522}function%2520t(e){return%2520r[e]}function%2520n(n){return%2520n=e(n),n%2526%2526c.test(n)%253Fn.replace(i,t):n}function%2520o(){var%2520e=%2522%2522;if(window.getSelection)e=window.getSelection().toString();else%2520if(document.getSelection)e=document.getSelection().toString();else{if(!document.selection)return%2520null;e=document.selection.createRange().text}return%2520e}var%2520i=/[%2526%253C%253E%2522'`]/g,c=RegExp(i.source),r={%2522%2526%2522:%2522%2526amp;%2522,%2522%253C%2522:%2522%2526lt;%2522,%2522%253E%2522:%2522%2526gt;%2522,'%2522':%2522%2526quot;%2522,%2522'%2522:%2522%2526%252339;%2522,%2522`%2522:%2522%2526%252396;%2522},u=o(),l=window.document.title,d=window.location.href,a=%2522%2522;a+='%253Ca%2520href=%2522'+n(d)+'%2522%253E',a+=n(u%253Fu:l),a+=%2522%253C/a%253E%2522,window.prompt(%2522created%2520link%2522,a)}();%22)}();">copy javascript</a>

<h3>Open hatena bookmark</h3>

Open hatena bookmark entry page.<br />
<em>E.g. Open http://b.hatena.ne.jp/entry/https://quietmole.github.io/pages/</em><br />

<a href="javascript:void%20function(){function%20e(){for(var%20e=document.getElementsByTagName(%22link%22),n=e.length,r=0;n%3Er;r++)if(e[r].rel%26%26%22canonical%22===e[r].rel.toLowerCase())return%20e[r].href;return%20null}var%20n=e()||location.href;try{if(window.XDomainRequest)throw%20Error(%22not%20support%20ie.%22);if(!window.XMLHttpRequest)throw%20Error(%22unknown%20client.%22);var%20r=new%20XMLHttpRequest,o=%22https://jsonp.afeld.me/%3Furl=%22+encodeURIComponent(%22http://b.hatena.ne.jp/entry/jsonlite/%3Furl=%22+encodeURIComponent(n));r.open(%22get%22,o),r.onload=function(){if(!(200%3C=r.status%26%26r.status%3C300))throw%20Error(%22error%20xhr%20response%22);var%20e=JSON.parse(r.responseText);window.confirm(e.count+%22users,%20Open%20hatena%20bookmark%20page%3F%20%22+e.entry_url)%26%26window.open(e.entry_url,null)},r.onerror=function(){throw%20Error(%22error%20xhr%20response%22)},r.send()}catch(t){var%20a=%22http://b.hatena.ne.jp/entry/%22+n.replace(/%23/g,%22%2523%22);window.confirm(%22Open%20hatena%20bookmark%20page%3F%20%22+a)%26%26window.open(a,null)}}();">open hatena bookmark</a> / <a href="javascript:void%20function(){window.prompt(%22built%20javascript%22,%22javascript:void%2520function(){function%2520e(){for(var%2520e=document.getElementsByTagName(%2522link%2522),n=e.length,r=0;n%253Er;r++)if(e[r].rel%2526%2526%2522canonical%2522===e[r].rel.toLowerCase())return%2520e[r].href;return%2520null}var%2520n=e()||location.href;try{if(window.XDomainRequest)throw%2520Error(%2522not%2520support%2520ie.%2522);if(!window.XMLHttpRequest)throw%2520Error(%2522unknown%2520client.%2522);var%2520r=new%2520XMLHttpRequest,o=%2522https://jsonp.afeld.me/%253Furl=%2522+encodeURIComponent(%2522http://b.hatena.ne.jp/entry/jsonlite/%253Furl=%2522+encodeURIComponent(n));r.open(%2522get%2522,o),r.onload=function(){if(!(200%253C=r.status%2526%2526r.status%253C300))throw%2520Error(%2522error%2520xhr%2520response%2522);var%2520e=JSON.parse(r.responseText);window.confirm(e.count+%2522users,%2520Open%2520hatena%2520bookmark%2520page%253F%2520%2522+e.entry_url)%2526%2526window.open(e.entry_url,null)},r.onerror=function(){throw%2520Error(%2522error%2520xhr%2520response%2522)},r.send()}catch(t){var%2520a=%2522http://b.hatena.ne.jp/entry/%2522+n.replace(/%2523/g,%2522%252523%2522);window.confirm(%2522Open%2520hatena%2520bookmark%2520page%253F%2520%2522+a)%2526%2526window.open(a,null)}}();%22)}();">copy javascript</a>


<h2>Support browsers</h2>

<ul>
  <li>IE (&gt;= 8)</li>
  <li>Safari (desktop, mobile)</li>
  <li>Chrome (desktop, mobile)</li>
</ul>


<h2>About CSP</h2>

A web site which uses CSP (Content Security Policy) blocks bookmarklet on Firefox.

<h3>Bookmarklet without an external script</h3>

<code>javascript:()(function(){window.alert('foo');})</code>

<ul>
  <li>chrome 46: alert 'foo'</li>
  <li>firefox 42: bookmarklet does not work</li>
  <li>ios 8 safari: alert 'foo'</li>
  <li>android 5.1 chrome: alert 'foo'</li>
  <li>android 5.1 firefox 41: bookmarklet does not work</li>
</ul>

<h3>Bookmarklet with an external script</h3>

<ul>
  <li>chrome 46: bookmarklet does not read an external script because of csp violation</li>
  <li>firefox 42: bookmarklet does not work</li>
</ul>

<a href="https://developer.mozilla.org/en-US/docs/Web/Security/CSP">CSP (Content Security Policy) - Web security | MDN</a>

<h2>One More Thing: For firefox (addon)</h2>

These are available for Desktop and for Android.

<h3>Build Link Plain (= Create link plain)</h3>

<a href="https://addons.mozilla.org/en-US/firefox/addon/build-link-plain/">Build Link Plain :: Add-ons for Firefox</a>

<h3>Build Link Markdown (= Create link markdown)</h3>

<a href="https://addons.mozilla.org/en-US/firefox/addon/build-link-markdown/">Build Link Markdown :: Add-ons for Firefox</a>

<h3>Build Link Html (= Create link html)</h3>

<a href="https://addons.mozilla.org/en-US/firefox/addon/build-link-html/">Build Link Html :: Add-ons for Firefox</a>

</body>
</html>
