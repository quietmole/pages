<!DOCTYPE HTML>
<html>
<head>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Bookmarklet of quietmole</title>
</head>
<body>
<h1>Bookmarklet of quietmole</h1>

Bookmarklet for Safari and Chrome.


<h3>Create link plain</h3>

Create plain link from selected text or current page title.<br />
<em>E.g. Bookmarklet of quietmole https://quietmole.github.io/pages/</em><br />

<a href="javascript:void%20function(){var%20n=(%22getSelection%22in%20window%3Fwindow:document).getSelection().toString(),o=window.document.title,i=window.location.href,t=[];n%3Ft.push(n):o%26%26t.push(o),t.push(i),window.prompt(%22created%20link%22,t.join(%22%20%22))}();">create link plain</a> / <a href="javascript:void%20function(){window.prompt(%22built%20javascript%22,%22javascript:void%2520function(){var%2520n=(%2522getSelection%2522in%2520window%253Fwindow:document).getSelection().toString(),o=window.document.title,i=window.location.href,t=[];n%253Ft.push(n):o%2526%2526t.push(o),t.push(i),window.prompt(%2522created%2520link%2522,t.join(%2522%2520%2522))}();%22)}();">copy javascript</a>


<h3>Create link markdown</h3>

Create markdown link from selected text or current page title.<br />
<em>E.g. [Bookmarklet of quietmole](https://quietmole.github.io/pages/)</em><br />

<a href="javascript:void%20function(){var%20n=(%22getSelection%22in%20window%3Fwindow:document).getSelection().toString(),o=window.document.title,i=window.location.href,t=[];n%3Ft.push(%22[%22+n+%22]%22):t.push(%22[%22+o+%22]%22),t.push(%22(%22+i+%22)%22),window.prompt(%22created%20link%22,t.join(%22%22))}();">create link markdown</a> / <a href="javascript:void%20function(){window.prompt(%22built%20javascript%22,%22javascript:void%2520function(){var%2520n=(%2522getSelection%2522in%2520window%253Fwindow:document).getSelection().toString(),o=window.document.title,i=window.location.href,t=[];n%253Ft.push(%2522[%2522+n+%2522]%2522):t.push(%2522[%2522+o+%2522]%2522),t.push(%2522(%2522+i+%2522)%2522),window.prompt(%2522created%2520link%2522,t.join(%2522%2522))}();%22)}();">copy javascript</a>


<h3>Create link html</h3>

Create html link from selected text or current page title.<br />
<em>E.g. &lt;a href="https://quietmole.github.io/pages/"&gt;Bookmarklet of quietmole&lt;/a&gt;</em><br />

<a href="javascript:void%20function(){function%20n(n){return%20null==n%3F%22%22:n+%22%22}function%20t(n){return%20r[n]}function%20e(e){return%20e=n(e),e%26%26i.test(e)%3Fe.replace(o,t):e}var%20o=/[%26%3C%3E%22'`]/g,i=RegExp(o.source),r={%22%26%22:%22%26amp;%22,%22%3C%22:%22%26lt;%22,%22%3E%22:%22%26gt;%22,'%22':%22%26quot;%22,%22'%22:%22%26%2339;%22,%22`%22:%22%26%2396;%22},c=(%22getSelection%22in%20window%3Fwindow:document).getSelection().toString(),u=window.document.title,w=window.location.href,d=%22%22;d+='%3Ca%20href=%22'+e(w)+'%22%3E',d+=e(c%3Fc:u),d+=%22%3C/a%3E%22,window.prompt(%22created%20link%22,d)}();">create link html</a> / <a href="javascript:void%20function(){window.prompt(%22built%20javascript%22,%22javascript:void%2520function(){function%2520n(n){return%2520null==n%253F%2522%2522:n+%2522%2522}function%2520t(n){return%2520r[n]}function%2520e(e){return%2520e=n(e),e%2526%2526i.test(e)%253Fe.replace(o,t):e}var%2520o=/[%2526%253C%253E%2522'`]/g,i=RegExp(o.source),r={%2522%2526%2522:%2522%2526amp;%2522,%2522%253C%2522:%2522%2526lt;%2522,%2522%253E%2522:%2522%2526gt;%2522,'%2522':%2522%2526quot;%2522,%2522'%2522:%2522%2526%252339;%2522,%2522`%2522:%2522%2526%252396;%2522},c=(%2522getSelection%2522in%2520window%253Fwindow:document).getSelection().toString(),u=window.document.title,w=window.location.href,d=%2522%2522;d+='%253Ca%2520href=%2522'+e(w)+'%2522%253E',d+=e(c%253Fc:u),d+=%2522%253C/a%253E%2522,window.prompt(%2522created%2520link%2522,d)}();%22)}();">copy javascript</a>

<h3>Open hatena bookmark</h3>

Open hatena bookmark entry page.<br />
<em>E.g. Open http://b.hatena.ne.jp/entry/https://quietmole.github.io/pages/</em><br />

<a href="javascript:void%20function(){function%20n(){for(var%20n=document.getElementsByTagName(%22link%22),e=n.length,o=0;e%3Eo;o++)if(n[o].rel%26%26%22canonical%22===n[o].rel.toLowerCase())return%20n[o].href;return%20null}var%20e=n()||location.href,o=%22http://b.hatena.ne.jp/entry/%22+e.replace(/%23/g,%22%2523%22);window.confirm(%22Open%20hatena%20bookmark%20page%3F%20%22+o)%26%26window.open(o,null)}();">open hatena bookmark</a> / <a href="javascript:void%20function(){window.prompt(%22built%20javascript%22,%22javascript:void%2520function(){function%2520n(){for(var%2520n=document.getElementsByTagName(%2522link%2522),e=n.length,o=0;e%253Eo;o++)if(n[o].rel%2526%2526%2522canonical%2522===n[o].rel.toLowerCase())return%2520n[o].href;return%2520null}var%2520e=n()||location.href,o=%2522http://b.hatena.ne.jp/entry/%2522+e.replace(/%2523/g,%2522%252523%2522);window.confirm(%2522Open%2520hatena%2520bookmark%2520page%253F%2520%2522+o)%2526%2526window.open(o,null)}();%22)}();">copy javascript</a>


<h2>About browser</h2>

A web site which uses CSP (Content Security Policy) blocks bookmarklet on Firefox.

<h3>Bookmarklet without an external script</h3>

<code>javascript:()(function(){window.alert('foo');})</code>

<ul>
  <li>chrome 46: alert 'foo'</li>
  <li>firefox 42: bookmarklet does not work</li>
  <li>ios 8 safari: alert 'foo'</li>
  <li>android 5.1 chrome: alert 'foo'</li>
  <li>android 5.1 firefox 41: bookmarklet does not work</li>
</ul>

<h3>Bookmarklet with an external script</h3>

<ul>
  <li>chrome 46: bookmarklet does not read an external script because of csp violation</li>
  <li>firefox 42: bookmarklet does not work</li>
</ul>

<a href="https://developer.mozilla.org/en-US/docs/Web/Security/CSP">CSP (Content Security Policy) - Web security | MDN</a>

</body>
</html>
